(()=>{var t={656:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectElement=e.EVENT_NAME=void 0;const s=o(237),i="rgba(255, 187, 51, 0.66)",n="rgba(68, 68, 228, 0.66)";function l(t){return[i,n].includes(t)}function r(t){t.preventDefault()}function h(t){var e;return"iframe"===(null===(e=null==t?void 0:t.tagName)||void 0===e?void 0:e.toLowerCase())}e.EVENT_NAME={INIT:"INIT",DESTROY:"DESTROY",MOUSE_MOVE:"MOUSE_MOVE",BLUR:"BLUR",CLICK:"CLICK"},e.SelectElement=class{constructor(){this.customEventHandlers=new Map,this.onMouseMove=t=>{t.stopPropagation(),this.hideEl();const{clientX:o,clientY:n}=t,r=document.elementFromPoint(o,n);if(this.showEl(),!r)return;if(r===this.mouseMoveEl)return;this.mouseMoveEl&&(this.mouseMoveEl.style.backgroundColor=this.mouseMoveElBackColor||"");const m=(a=this.mouseMoveEl)?h(a)?a:s.findNode(a,h):null;var a;if(m){console.log("===当前是frame===");const{top:t,left:e,width:o,height:s}=m.getBoundingClientRect();return void this.surround(e,t,o,s)}const d=r.style.backgroundColor;this.mouseMoveElBackColor=l(d)?"":d,r.style.backgroundColor=i,this.mouseMoveEl=r,this.emit(e.EVENT_NAME.MOUSE_MOVE,this.mouseMoveEl)},this.onClick=t=>{t.stopPropagation(),this.hideEl();const{clientX:o,clientY:s}=t,i=document.elementFromPoint(o,s);if(this.showEl(),!i)return;const r=i===this.mouseMoveEl&&!l(this.mouseMoveElBackColor)&&this.mouseMoveElBackColor||i.style.backgroundColor;i.style.backgroundColor=n,setTimeout((()=>{i.style.backgroundColor=l(r)?"":r}),1e3),this.emit(e.EVENT_NAME.CLICK,i)},this.onMouseOut=t=>{var e;const o=t.target;o&&(null===(e=o.id)||void 0===e?void 0:e.includes("sebm-mark"))&&this.onBlur()},this.onBlur=()=>{this.mouseMoveEl&&(this.mouseMoveEl.style.backgroundColor=this.mouseMoveElBackColor||"",this.mouseMoveElBackColor=void 0,this.mouseMoveEl=void 0,this.emit(e.EVENT_NAME.BLUR))}}get masks(){return[this.markTop,this.markLeft,this.markBottom,this.markRight].filter(Boolean)}init(){this.bind(),this.emit(e.EVENT_NAME.INIT)}destroy(){this.unBind(),this.emit(e.EVENT_NAME.DESTROY)}on(t,e){const o=this.customEventHandlers.get(t)||[];o.push(e),this.customEventHandlers.set(t,o)}emit(t,e){const o=this.customEventHandlers.get(t);o&&o.length&&o.forEach((t=>{t.call(this,e)}))}bind(){this.initEl(),this.unBind();const{masks:t}=this;t.forEach((t=>{null==t||t.addEventListener("click",this.onClick),null==t||t.addEventListener("mousemove",this.onMouseMove)})),window.addEventListener("keydown",r),window.addEventListener("wheel",r,{passive:!1}),window.addEventListener("blur",this.onBlur),window.addEventListener("mouseout",this.onMouseOut),this.showEl()}unBind(){const{masks:t}=this;t.forEach((t=>{null==t||t.removeEventListener("click",this.onClick),null==t||t.removeEventListener("mousemove",this.onMouseMove)})),window.removeEventListener("keydown",r),window.removeEventListener("wheel",r),window.removeEventListener("blur",this.onBlur),window.removeEventListener("mouseout",this.onMouseOut),this.hideEl(),this.mouseMoveEl&&(this.mouseMoveEl.style.backgroundColor=this.mouseMoveElBackColor||""),this.mouseMoveEl=void 0,this.mouseMoveElBackColor=void 0}initEl(){this.markLeft?this.markLeft.parentElement||(document.body.appendChild(this.markLeft),document.body.appendChild(this.markRight),document.body.appendChild(this.markTop),document.body.appendChild(this.markBottom)):(this.markLeft=this.buildMark("sebm-mark-left"),this.markRight=this.buildMark("sebm-mark-right"),this.markTop=this.buildMark("sebm-mark-top"),this.markBottom=this.buildMark("sebm-mark-bottom"),this.surround(0,0,0,0))}buildMark(t){const e=document.createElement("div");return document.body.appendChild(e),e.id=t,e.style.backgroundColor="transparent",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="999999999",e}surround(t,e,o,s){this.markTop.style.left="0",this.markTop.style.top="0",this.markTop.style.width="100%",this.markTop.style.height=`${e}px`,this.markLeft.style.left="0",this.markLeft.style.top=`${e}px`,this.markLeft.style.width=`${t}px`,this.markLeft.style.height="100%",this.markRight.style.left=`${t+o}px`,this.markRight.style.top=`${e}px`,this.markRight.style.width="100%",this.markRight.style.height="100%",this.markBottom.style.left=`${t}px`,this.markBottom.style.top=`${e+s}px`,this.markBottom.style.width=`${o}px`,this.markBottom.style.height="100%"}showEl(){this.markLeft&&(this.markLeft.style.display="block",this.markRight.style.display="block",this.markTop.style.display="block",this.markBottom.style.display="block")}hideEl(){this.markLeft&&(this.markLeft.style.display="none",this.markRight.style.display="none",this.markTop.style.display="none",this.markBottom.style.display="none")}}},254:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_NAME=e.SelectElement=void 0;const s=o(656);Object.defineProperty(e,"EVENT_NAME",{enumerable:!0,get:function(){return s.EVENT_NAME}}),Object.defineProperty(e,"SelectElement",{enumerable:!0,get:function(){return s.SelectElement}})},237:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findNode=void 0,e.findNode=function(t,e){let o=t;for(;!e(o);){if(!o.parentNode)return null;o=o.parentNode}return o}}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,o),n.exports}(()=>{const{EVENT_NAME:t,SelectElement:e}=o(254),s=new e;s.on(t.INIT,(()=>{console.log("--init--")})),s.on(t.DESTROY,(()=>{console.log("--destroy--")})),s.on(t.MOUSE_MOVE,(t=>{console.log("--mouse move--",t)})),s.on(t.MOUSE_MOVE,(t=>{console.log("--mouse move--",t)})),s.on(t.CLICK,(t=>{console.log("--click--",t)})),s.on(t.BLUR,(()=>{console.log("--blur--")})),s.init(),setTimeout((()=>{s.destroy()}),5e3)})()})();